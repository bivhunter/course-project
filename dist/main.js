!function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);var r=document.createElement("template");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function l(t){var o="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;var e;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==o){if(o.has(t))return o.get(t);o.set(t,n)}function n(){return p(t,arguments,h(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)})(t)}function p(t,e,n){return(p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var r=new(Function.bind.apply(t,o));return n&&f(r,n.prototype),r}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.innerHTML='\n<style>\n.main  {\n    width: 600px;\n    height: 600px;\n    margin: 50px auto 0 auto;\n    padding: 0;\n    position: relative;\n }\n \n .tooltip-wrapper{\n    width: 100%;\n    height: 40px;\n }\n</style>\n\n\t<div class=main>\n\t\t<div class="tooltip-wrapper">\n\t\t</div>\n\t\t<div class="app-wrapper">\n\t\t</div>\n\t</div>\n';var d=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=u(this,h(n).call(this))).attachShadow({mode:"open"}),e.anchor=t.anchor,e.props=t,e.onInit(),e}var t,e,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(n,l(HTMLElement)),t=n,(e=[{key:"onInit",value:function(){}},{key:"state",set:function(t){this._state=a({},t),this.props.state=this._state,this.render()},get:function(){return this._state}},{key:"props",set:function(t){this._props=a({},this.props,{},t)},get:function(){return this._props}},{key:"template",set:function(t){this._template=t.content.cloneNode(!0),this.shadowRoot.appendChild(this._template)},get:function(){return this._template}}])&&c(t.prototype,e),o&&c(t,o),n}(),b=document.createElement("template");function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function g(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}b.innerHTML='\n\t<style>\n\tbutton{\n    transition-duration: 0.6s;\n    cursor: pointer;\n    border-radius: 5px;\n    outline: none;\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\n\n.delete-button, .cancel-button, .not-done-filter-button{\n    background-color: white;\n    color: black;\n    border: 2px solid red; \n     box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\n.delete-button:hover, .cancel-button:hover, .not-done-filter-button:hover {\n    background-color: red; \n    color: white;\n}\n\n.not-todo-button, .all-filter-button{\n    background-color: white;\n    color: black;\n    border: 2px solid blue;\n     box-shadow: 2px 2px 4px rgba(0,0,0,0.5); \n}\n\n.not-todo-button:hover, .all-filter-button:hover {\n    background-color: blue; \n    color: white;\n}\n\n\n\n.todo-button, .save-button, .add-button, .done-filter-button{\n    background-color: white;\n    color: black;\n    border: 2px solid green; \n     box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\n.todo-button:hover, .save-button:hover, .add-button:hover, .done-filter-button:hover {\n    background-color: green; \n    color: white;\n}\n\n.sign-out-button{\n    border: 3px #B99E7E groove;\n    border-radius: 4px;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n    background-color: white;\n}\n\n.submit-button{\n    font-size: 20px;\n    height: 40px;\n    box-sizing: border-box;\n    padding: 0 20px 0 20px;\n    display: block;\n    margin: 30px auto 10px auto; \n    border: 3px #B99E7E groove;\n    border-radius: 4px;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n    background-color: white;\n    color: #715636;\n}\n\n.submit-button:hover, .sign-out-button:hover {\n    background-color: #B99E7E; \n    color: white;\n}\n\t</style>\n\t<button type="submit">\n\t\n    </button>\n';var O=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,v(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=b,this.render(),this.setDataAttribute()}},{key:"setDataAttribute",value:function(){this.dataset.text=this.props.title}},{key:"render",value:function(){this.anchor.appendChild(this);var t=this.shadowRoot.querySelector("button");t.classList.add(this.props.classStyle),t.textContent=this.props.title}}])&&m(t.prototype,n),o&&m(t,o),e}();customElements.define("my-component-button",O);var k=document.createElement("template");function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function E(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){return(P=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}k.innerHTML='\n<style>\n\tdiv {\n    height: 100%;\n}\n\n.left-column{\n    float: left;\n    width: 80%;\n\n}\n\n.right-column{\n    \n    float: right;\n    width: 20%;\n}\n\ntd {\n    text-align: center;\n    vertical-align: center;\n}\ntable{\n    width: 100%;\n    height: 75%;\n}\n\np {\n    width: 100%;\n    margin: 10px;\n    padding: 0;\n}\n\n:host{\n    position: relative;\n    overflow: auto;\n    margin-top: 14px;\n    display: block;\n    height: 70px;\n    border-radius: 10px;\n     \n    box-shadow:  -2px -2px 4px rgba(0,0,0,0.5);\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\n\n:host([data-completed = "true"]){\n    background: #81FFD6;\n    border: 3px #0A885F groove; \n}\n\n:host([data-completed = "true"]:hover){\n    background:#54D2A9;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\n:host([data-completed = "false"]){\n    border: 3px #C44F38 groove; \n    background: #FFC0A9;\n}\n\n:host([data-completed = "false"]:hover){\n    background:#EA755E;\n   \n  box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\nspan{\n    position: absolute;\n    right: 15px;\n    bottom: 2px;\n    font-size: 12px;\n    color: #4d4d4d;\n    text-shadow: 2px 2px 3px rgba(0,0,0,0.5);\n}\n</style>\t\n\n<div class="left-column">\n   \n    <p></p>\n</div>\n<div class="right-column">\n    <table>\n        <tr><td class="done-button-wrapper"></td></tr>\n        <tr><td class="delete-button-wrapper"></td></tr>\n        \n    </table>\n     <span></span>\n</div>\n';var T=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,S(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=k,this.render(),this.setDataAttribute()}},{key:"setDataAttribute",value:function(){this.dataset._id=this.props.task._id,this.dataset.completed=this.props.task.completed}},{key:"addListeners",value:function(){var e=this;this.addEventListener("mouseover",function(){e.renderButton(),e.addButtonListeners()}),this.addEventListener("mouseout",this.removeButton.bind(this)),this.addEventListener("click",function(t){return e.clickListener(t)})}},{key:"clickListener",value:function(t){"BUTTON"!==t.composedPath()[0].tagName&&ie.dispatch("startEditTask",this.props.task)}},{key:"addButtonListeners",value:function(){var e=this;this.deleteButton.addEventListener("click",function(t){ie.dispatch("deletedTask",e.props.task._id)}),this.doneButton.addEventListener("click",function(t){ie.dispatch("doneTask",e.props.task)})}},{key:"removeButton",value:function(){this.deleteButtonWrapper.removeChild(this.deleteButton),this.doneButtonWrapper.removeChild(this.doneButton)}},{key:"render",value:function(){this.anchor.appendChild(this),this.shadowRoot.querySelector("p").textContent=this.props.task.text,this.shadowRoot.querySelector("span").textContent=this.props.task.createDate,this.addListeners()}},{key:"renderButton",value:function(){this.doneButtonWrapper=this.shadowRoot.querySelector(".done-button-wrapper"),this.deleteButtonWrapper=this.shadowRoot.querySelector(".delete-button-wrapper"),this.deleteButton=new O({title:"Delete",classStyle:"delete-button",anchor:this.deleteButtonWrapper}),this.props.task.completed?this.doneButton=new O({title:"Not todo",classStyle:"not-todo-button",anchor:this.doneButtonWrapper}):this.doneButton=new O({title:"Todo",classStyle:"todo-button",anchor:this.doneButtonWrapper})}}])&&j(t.prototype,n),o&&j(t,o),e}();customElements.define("my-component-task",T);var _=document.createElement("template");function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){L(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function A(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function F(t,e){return(F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}_.innerHTML='\n    <style>\n .left-column{\n    float: left;\n    width: 80%;\n\n}\n\n.right-column{\n    height: 100%;\n    float: right;\n    width: 20%;\n}\n\ntd {\n    text-align: center;\n    vertical-align: center;\n}\ntable{\n    width: 100%;\n    height: 75%;\n}\n\n:host{\nposition: relative;\n    margin-top: 14px;\n    display: block;\n    height: 70px;\n    border-radius: 10px;\n    border: 3px #665646 groove;  \n    box-shadow:  -2px -2px 4px rgba(0,0,0,0.5);\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\n\n:host([data-completed = "false"]){\n    background: #EA755E;\n}\n\n:host(my-component-textarea[data-completed = "true"]){\n    background: #68E8BD;\n}\n\n\n.text-area{\n    box-sizing: border-box;\n    height: 100%;\n    width: 100%;\n    padding: 10px;\n    margin: 0;\n    border: none;\n    outline: none;\n    resize: none;\n    background: inherit;\n    font: inherit;\n}\n\nspan{\n    position: absolute;\n    right: 15px;\n    bottom: 2px;\n    font-size: 12px;\n    color: #4d4d4d;\n    text-shadow: 2px 2px 3px rgba(0,0,0,0.5);\n}\n    </style>\n    \n <div class="left-column">\n       <textarea class="text-area"></textarea>\n </div>\n <div class="right-column">\n       <table>\n         <tr><td class="save-button-wrapper"></td></tr>\n         <tr><td class="cancel-button-wrapper"></td></tr>\n       </table>\n       <span></span>\n       </div>    \n';var q=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,I(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&F(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=_,this.render(),this.setDataAttribute()}},{key:"setDataAttribute",value:function(){this.dataset._id=this.props.task._id,this.dataset.completed=this.props.task.completed}},{key:"render",value:function(){var t=this;this.anchor.appendChild(this),this.textarea=this.shadowRoot.querySelector("textarea"),this.textarea.value=this.props.task.text,this.shadowRoot.querySelector("span").textContent=this.props.task.createDate,setTimeout(function(){t.textarea.focus()},0),this.saveButtonWrapper=this.shadowRoot.querySelector(".save-button-wrapper"),this.cancelButtonWrapper=this.shadowRoot.querySelector(".cancel-button-wrapper"),this.renderButton(),this.addButtonListeners(),this.addListeners()}},{key:"renderButton",value:function(){this.saveButton=new O({title:"Save",classStyle:"save-button",anchor:this.saveButtonWrapper}),this.cancelButton=new O({title:"Cancel",classStyle:"cancel-button",anchor:this.cancelButtonWrapper})}},{key:"addListeners",value:function(){var e=this;this.addEventListener("mouseleave",function(t){ie.dispatch("endEditTask",e.props.task)}),this.textarea.addEventListener("keydown",function(t){"Enter"===t.key&&(t.preventDefault(),ie.dispatch("endEditTask",D({},e.props.task,{text:e.textarea.value})))})}},{key:"addButtonListeners",value:function(){var e=this;this.saveButton.addEventListener("click",function(t){ie.dispatch("endEditTask",D({},e.props.task,{text:e.textarea.value}))}),this.cancelButton.addEventListener("click",function(t){ie.dispatch("endEditTask",e.props.task)})}}])&&B(t.prototype,n),o&&B(t,o),e}();customElements.define("my-component-textarea",q);var W=document.createElement("template");function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach(function(t){H(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function G(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}W.innerHTML="\n <style>\n    ul{\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n}\n\n\n</style>\n    <div>\n    <ul></ul>\n</div>\n\n";var K=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,V(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=W,this.render()}},{key:"render",value:function(){this.anchor.appendChild(this),this.ul=this.shadowRoot.querySelector("ul"),this.renderList()}},{key:"renderList",value:function(){var e=this;this.ul.innerHTML="",this.props.state.todoView.forEach(function(t){e.addTask(t)})}},{key:"addTask",value:function(t){var e=document.createElement("li");if(t.editing)new q(N({},this.props,{anchor:e,task:t}));else new T(N({},this.props,{anchor:e,task:t}));this.ul.appendChild(e)}}])&&U(t.prototype,n),o&&U(t,o),e}();customElements.define("my-component-task-list",K);var Q=document.createElement("template");function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Z(t,e){return!e||"object"!==X(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Q.innerHTML='\n<style>\n    \n    .wrapper{\n     height: 80px;\n     margin: 10px 0 10px 0;\n     \n    }\n    \n    .left-column{\n        width: 80%;\n        float: left;\n    }\n\n    .right-column{\n        /*float: right;*/\n        margin: 320px;\n        display: table-cell;\n        vertical-align: middle;\n        text-align: center;\n        height: 80px;\n        width: 20%;\n    }\n    \n    textarea{\n    box-sizing: border-box;\n    height: 80px;\n    width: 100%;\n    padding: 10px;\n    margin: 0;\n    outline: none;\n    resize: none;\n    font: inherit;\n    border-radius: 10px;\n    border: 3px #B99E7E groove;  \n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n    background: #FFE4C4;\n    \n}\n\ntextarea:hover {\n    background: #F2D7B7;\n    border: 3px #665646 groove;  \n}\n/*\n.left-column:hover{\nbackground: #F2D7B7;\n}*/\n    \n</style>\n    \n    <div class="wrapper">\n        <div class="left-column">\n            <textarea ></textarea>\n        </div>\n        <div class="right-column"></div>\n    </div>\n\n';var et=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,$(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=Q,this.render(),this.addListeners()}},{key:"addListeners",value:function(){var e=this;this.button.addEventListener("click",function(t){e.addTask()}),this.textarea.addEventListener("keydown",function(t){"Enter"===t.key&&e.addTask()})}},{key:"addTask",value:function(){ie.dispatch("addTask",this.textarea.value),this.textarea.value=""}},{key:"render",value:function(){this.anchor.appendChild(this),this.textarea=this.shadowRoot.querySelector("textarea");var t=this.shadowRoot.querySelector(".right-column");this.button=new O({title:"Add task",anchor:t,classStyle:"add-button"})}}])&&Y(t.prototype,n),o&&Y(t,o),e}();customElements.define("my-component-input",et);var nt=document.createElement("template");function ot(t){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function st(t,e){return!e||"object"!==ot(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}nt.innerHTML='\n    <style>\n   \n    .wrapper {\n   \n        width: 100% ;\n    }\n    table {\n    \n      margin: 10px;\n        /*width: 100%;*/\n        \n        height: 100%;\n    }\n    td {\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n        padding: 8px;\n    }\n    \n    [data-select="selected"] {\n        border-radius: 10px;\n        border: 3px #B99E7E groove;  \n        box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n        background: #FFE4C4;\n    }\n</style>\n    <div class="wrapper">\n        \n        <table>\n            <tr>\n                <td>Filter tasks</td>\n                <td class="all-wrapper"></td>\n                <td class="done-wrapper"></td>\n                <td class="not-done-wrapper"></td>\n            </tr>    \n        </table>    \n    </div>    \n';var lt=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),st(this,ct(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=nt,this.render(),this.applyChanges()}},{key:"render",value:function(){this.anchor.appendChild(this),this.allButtonWrapper=this.shadowRoot.querySelector(".all-wrapper"),this.doneButtonWrapper=this.shadowRoot.querySelector(".done-wrapper"),this.notDoneButtonWrapper=this.shadowRoot.querySelector(".not-done-wrapper"),this.allTasks=new O({title:"All",classStyle:"all-filter-button",anchor:this.allButtonWrapper}),this.doneTasks=new O({title:"Done",classStyle:"done-filter-button",anchor:this.doneButtonWrapper}),this.notDoneTasks=new O({title:"Not Done",classStyle:"not-done-filter-button",anchor:this.notDoneButtonWrapper}),this.addButtonListeners()}},{key:"applyChanges",value:function(){switch([this.allButtonWrapper,this.doneButtonWrapper,this.notDoneButtonWrapper].forEach(function(t){t.dataset.select=""}),this.props.state.filterMethod){case"allTasks":this.allButtonWrapper.dataset.select="selected";break;case"doneTasks":this.doneButtonWrapper.dataset.select="selected";break;case"notDoneTasks":this.notDoneButtonWrapper.dataset.select="selected"}}},{key:"addButtonListeners",value:function(){var e=this;this.allTasks.addEventListener("click",function(t){ie.dispatch("allFilter",e.props)}),this.doneTasks.addEventListener("click",function(t){ie.dispatch("doneFilter",e.props)}),this.notDoneTasks.addEventListener("click",function(t){ie.dispatch("notDoneFilter",e.props)})}},{key:"state",set:function(t){this.props.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach(function(t){it(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t),this.applyChanges()}}])&&at(t.prototype,n),o&&at(t,o),e}();customElements.define("my-component-filter",lt);var pt=document.createElement("template");function ft(t){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach(function(t){bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mt(t,e){return!e||"object"!==ft(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function gt(t){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}pt.innerHTML='\n<style>\n    td {\n        padding: 10px;\n        text-align: center;\n        vertical-align: middle;\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n    }\n    div {\n        font-size: 20px;\n    }\n    \n    .all-tasks {\n        color: blue;\n        font-size: 40px;\n        text-shadow: 3px 3px 4px rgba(0,0,0,0.5);\n    }\n    .completed-tasks{\n        color: green;\n        font-size: 40px;\n        text-shadow: 3px 3px 4px rgba(0,0,0,0.5);\n    }\n    .not-completed-tasks {\n        color: red;\n        font-size: 40px;\n        text-shadow: 3px 3px 4px rgba(0,0,0,0.5);\n    }\n    \n</style>\n<div>\n    <table>\n    \t<tr>\n    \t\t<td>All tasks</td>\n    \t\t<td class="all-tasks"></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td>Completed tasks</td>\n    \t\t<td class="completed-tasks"></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td>Not completed tasks</td>\n    \t\t<td class="not-completed-tasks"></td>\n    \t</tr>\n        \n\t</table>\n</div>    \n';var wt=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mt(this,gt(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=pt,this.render(),this.applyChanges()}},{key:"render",value:function(){this.anchor.appendChild(this),this.allTasks=this.shadowRoot.querySelector(".all-tasks"),this.completedTasks=this.shadowRoot.querySelector(".completed-tasks"),this.notCompletedTasks=this.shadowRoot.querySelector(".not-completed-tasks")}},{key:"applyChanges",value:function(){this.allTasks.textContent=this.props.state.countTasks.all,this.completedTasks.textContent=this.props.state.countTasks.completed,this.notCompletedTasks.textContent=this.props.state.countTasks.notCompleted}},{key:"state",set:function(t){this.props.state=dt({},t),this._state=dt({},t),this.applyChanges()},get:function(){return this._state}}])&&yt(t.prototype,n),o&&yt(t,o),e}();customElements.define("my-component-counter",wt);var Ot=document.createElement("template");function kt(t){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach(function(t){Et(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function St(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Pt(t,e){return!e||"object"!==kt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _t(t,e){return(_t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Ot.innerHTML='\n\n<style>\n    ul{\n    list-style-type: none;\n    }\n    .left-column{\n    margin-left: 0;\n        float: left;\n        width: 70%;\n    }\n    .right-column{\n        width: 30%;\n        float: right;\n    }\n    h1{\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n        \n    }\n    .header {\n        position: relative;\n    }\n    .sign-out-wrapper {\n        position: absolute;\n        right: 10px;\n        top: 10px;\n    }\n    \n</style>\n    <div class="header">\n        <h1>Todo Application</h1>\n        <div class="sign-out-wrapper"></div>\n    </div>\n    <div class="left-column">\n        <div class="input-wrapper"></div>\n        <div class="filter-wrapper"></div>\n        <div class="todo-list-wrapper"></div>\n    </div>\n    <div class="right-column"></div>\n';var Ct=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,Tt(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_t(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=Ot,ie.dispatch("initTodoComponent")}},{key:"render",value:function(){if(this.isRendered)this.applyChanges(this.props.state);else{this.isRendered=!0,this.anchor.appendChild(this);var t=this.shadowRoot.querySelector(".right-column"),e=this.shadowRoot.querySelector(".todo-list-wrapper"),n=this.shadowRoot.querySelector(".input-wrapper"),o=this.shadowRoot.querySelector(".filter-wrapper"),r=this.shadowRoot.querySelector(".sign-out-wrapper");new et(jt({},this.props,{anchor:n}));this.taskList=new K(jt({},this.props,{anchor:e})),this.filter=new lt(jt({},this.props,{anchor:o})),this.counter=new wt(jt({},this.props,{anchor:t})),this.signOutButton=new O({title:"Sign Out",classStyle:"sign-out-button",anchor:r})}}},{key:"applyChanges",value:function(t){this.taskList.state=jt({},t),this.filter.state=jt({},t),this.counter.state=jt({},t)}},{key:"addListeners",value:function(){this.signOutButton.addEventListener("click",function(){ie.dispatch("signOut")})}},{key:"state",set:function(t){this._state=jt({},t),this.props.state=this._state,this.render(),this.addListeners()}}])&&St(t.prototype,n),o&&St(t,o),e}();customElements.define("my-component-todo",Ct);var Rt=document.createElement("template");function Dt(t){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Bt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function At(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function It(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Rt.innerHTML='\n\t<style>\n\t\t.form-wrapper{\n\t\t\t\theight: 600px;\n\t\t\t\twidth: 600px;\n\t\t\t\tmargin: 10px auto 10px auto;\n\t\t\t\tdisplay: table-cell;\n\t\t\t\tvertical-align: middle;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\nh1{\n\tfont-size: 40px;\n\ttext-align: center;\n\tmargin:20px;\n\tcolor: #715636;\n\ttext-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\ninput:hover{\n\tbackground: #E7CCAC;\n}\ninput:focus{\n\toutline: 3px #B99E7E groove;\n\tborder: 3px #B99E7E groove;\n}\n\ninput:-webkit-autofill{\n\tbackground: #E7CCAC\n}\n\n\nlabel, input {\n\tcolor: #715636;\n\ttext-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n\t\t\t\tfont-size: 20px;\n\n\t\t\t\tmargin: 10px 0 10px 0 ;\n\t\t\t\tdisplay: block;\n\t\t\t} \nlabel{\n\tcolor: #715636;\n\ttext-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\t\t\t\n\ninput {\n\twidth:300px;\n\theight: 30px;\n\tborder: 3px #B99E7E groove;\n\tborder-radius: 4px;\n\tbox-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n\t\n}\n\nform{\n    width: 400px; \n\t/*height: 400px;*/\n\tbackground: #FFE4C4;\n\tdisplay: block;\n\tbox-sizing: border-box;\n\t\n\tmargin: 10px auto 10px auto; \n\tpadding: 50px; \n\ttext-align: left;\n\tborder-radius: 10px;\n\tborder: 5px #B99E7E groove;\n\tbox-shadow: 5px 5px 10px rgba(0,0,0,0.5);\n\n\n\t/* border-style: groove ridge ridge groove; */\n\t/* display: table-cell;\n\tvertical-align: middle; */\n}\n\n.hide{\n    display: none;\n}\n\ntable{\n    width: 100%;\n}\n\ntd{\n    vertical-align: middle;\n}\n\n\n\t</style>\n\t<div class="form-wrapper">\n\t\t<form name="login">\n\t\t\t<h1>Login Form</h1>\n\t\t\t<label for="username" class="hide username">User Name</label>\n\t\t\t<input type="text"  class="hide" name="username"  placeholder="Enter User Name">\n\t\t\t<label for="email">Email</label>\n\t\t\t<input type="email" name="email" autocomplete="on" placeholder="Enter Email">\n\t\t\t<label for="password">Password</label>\n\t\t\t<input type="password" name="password" autocomplete="on" placeholder="Enter Password">\n\t\t\t\n\t\t\t\n\t\t\t<table>\n\t\t\t    <tr>\n\t\t\t        <td class="in-button"></td>\n\t\t\t        <td class="up-button"></td>\n                </tr>\n            </table>\n\t\t</form>\n\t</div>\n';var Wt=function(){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),It(this,Ft(e).call(this,t))}var t,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(e,d),t=e,(n=[{key:"onInit",value:function(){this.template=Rt,this.render()}},{key:"render",value:function(){this.anchor.appendChild(this),this.emailInput=this.shadowRoot.querySelector('input[name="email"]'),this.passwordInput=this.shadowRoot.querySelector('input[name="password"]'),this.formElement=this.shadowRoot.querySelector('[name="login"]');var t=this.shadowRoot.querySelector(".in-button"),e=this.shadowRoot.querySelector(".up-button");this.submitButton=new O({title:"Sign In",classStyle:"submit-button",anchor:t}),this.registerButton=new O({title:"Sign Up",classStyle:"submit-button",anchor:e}),this.addButtonListeners()}},{key:"addButtonListeners",value:function(){var t=this;this.submitButton.addEventListener("click",function(){ie.dispatch("signIn",{email:t.emailInput.value,password:t.passwordInput.value})}),this.registerButton.addEventListener("click",function(){t.registerMode?ie.dispatch("signUp",{email:t.emailInput.value,password:t.passwordInput.value,username:t.userNameInput.value}):(t.userNameInput=t.shadowRoot.querySelector('input[name="username"]'),t.userNameInput.classList.toggle("hide"),t.shadowRoot.querySelector(".username").classList.toggle("hide"),t.registerMode=!0)})}},{key:"state",set:function(t){this._state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach(function(t){Bt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t),this.props.state=this._state}}])&&At(t.prototype,n),o&&At(t,o),e}();function Mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}customElements.define("my-component-login",Wt);var zt={login:{url:"/login",component:Wt,route:"login"},todo:{url:"/todo-app",component:Ct,route:"todo"}},Nt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routerConfig=zt,this.addListeners()}var e,n,o;return e=t,(n=[{key:"addListeners",value:function(){window.onpopstate=function(t){ie.dispatch("changeRoute",t.state)}}},{key:"changeRoute",value:function(t){return this.currentRoute=this.routerConfig[t],window.history.pushState(this.currentRoute.route,"",this.currentRoute.url),this.currentRoute}}])&&Mt(e.prototype,n),o&&Mt(e,o),t}());function Ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Ut=new(function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.token=localStorage.getItem("token")}var t,n,o;return t=e,(n=[{key:"checkAuthorization",value:function(){return fetch("".concat(this.url,"/me"),{method:"GET",headers:{Authorization:this.token}}).then(function(t){if(!t.ok)throw t.json();return t.json()})}},{key:"post",value:function(t){return fetch("".concat(this.url,"/todos"),{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.token}}).then(function(t){if(!t.ok)throw t.json();return t.json()})}},{key:"get",value:function(){return fetch("".concat(this.url,"/todos"),{method:"GET",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.token}}).then(function(t){if(!t.ok)throw new Error("error");return t.json()})}},{key:"delete",value:function(t){return fetch("".concat(this.url,"/todos/").concat(t),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.token}}).then(function(t){if(!t.ok)throw new Error("File not found")})}},{key:"put",value:function(t){return fetch("".concat(this.url,"/todos/").concat(t._id),{method:"PUT",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:this.token}}).then(function(t){if(!t.ok)throw t.json();return t.json()})}},{key:"signIn",value:function(t){return fetch("".concat(this.url,"/login"),{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(t){if(!t.ok)throw t.json();return t.json()})}},{key:"signUp",value:function(t){return fetch("".concat(this.url,"/register"),{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(t){if(!t.ok)throw t.json();return t.json()})}}])&&Ht(t.prototype,n),o&&Ht(t,o),e}())("https://todo-app-back.herokuapp.com");function Gt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach(function(t){Kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qt(t,e){switch(e){case"allTasks":return Gt(t);case"doneTasks":return Gt(t.filter(function(t){return t.completed}));case"notDoneTasks":return Gt(t.filter(function(t){return!t.completed}))}}function Xt(t){var e=t.length,n=0,o=0;return t.forEach(function(t){t.completed?n++:o++}),{all:e,completed:n,notCompleted:o}}function Yt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var Zt=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.channels={}}var e,n,o;return e=t,(n=[{key:"subscribe",value:function(t,e){this.channels[t]||(this.channels[t]=[]),this.channels[t].push(e)}},{key:"unSubscribe",value:function(t,e){this.channels[t]&&(this.channels[t]=this.channels[t].filter(function(t){return t!==e}))}},{key:"publish",value:function(t,e){this.channels[t]&&this.channels[t].length&&this.channels[t].forEach(function(t){t(e)})}}])&&Yt(e.prototype,n),o&&Yt(e,o),t}());function $t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var te=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reducers={CHANGE_ROUTE:function(t,e,n){return Jt({},e,{},t,{message:n})},INIT_TODO:function(t,e,n){return Jt({},e,{todoList:Gt(t),todoView:Gt(t),filterMethod:"allTasks",countTasks:Xt(Gt(t)),message:n})},ADD_TODO:function(t,e,n){var o=[t].concat(Gt(e.todoList));return Jt({},e,{todoList:o,todoView:Qt(o,e.filterMethod),countTasks:Xt(o),message:n})},DELETE_TODO:function(e,t,n){var o=Gt(t.todoList.filter(function(t){return t._id!==e}));return Jt({},t,{todoList:o,todoView:Qt(o,t.filterMethod),countTasks:Xt(o),message:n})},CHANGE_TODO:function(e,t,n){var o=Gt(t.todoList.map(function(t){return t._id===e._id?e:t}));return Jt({},t,{todoList:o,todoView:Qt(o,t.filterMethod),countTasks:Xt(o),message:n})},FILTER:function(t,e,n){return Jt({},e,{filterMethod:t,todoView:Qt(e.todoList,t),message:n})},ERROR:function(t,e,n){return Jt({},e,{message:n})}},this.state={todoList:[],todoView:[]}}var e,n,o;return e=t,(n=[{key:"dispatch",value:function(t,e,n){this.reducers[t]&&(this.state=this.reducers[t](e,this.state,n)),Zt.publish("stateChanged",this.state)}}])&&$t(e.prototype,n),o&&$t(e,o),t}());function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach(function(t){oe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function re(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var ie=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.initHandlers()}var e,n,o;return e=t,(n=[{key:"initHandlers",value:function(){var n=this;this.handlers={addTask:function(t){return n.addTask({text:t,completed:!1})},initApplication:function(){return n.initApplication()},initTodoComponent:function(){return n.getTaskList()},deletedTask:function(t){return n.deleteTask(t)},doneTask:function(t){return n.changeTaskCompletedStatus(t)},startEditTask:function(t){return n.changeTaskEditingMode(ne({},t,{editing:!0}))},endEditTask:function(t){delete t.editing,n.changeTaskEditingMode(ne({},t))},allFilter:function(){return n.filterTask("allTasks")},doneFilter:function(){return n.filterTask("doneTasks")},notDoneFilter:function(){return n.filterTask("notDoneTasks")},signIn:function(t){return n.signIn(t)},signOut:function(){return n.signOut()},signUp:function(t){return n.signUp(t)},changeRoute:function(t){var e=Nt.changeRoute(t);n.changeRoute(e,{})}}}},{key:"dispatch",value:function(t,e){this.handlers[t]&&this.handlers[t](e)}},{key:"getTaskList",value:function(){Ut.get().then(function(t){return te.dispatch("INIT_TODO",t,{})}).catch(function(){te.dispatch("ERROR","",{text:"Server not response, try again",status:"error"})})}},{key:"addTask",value:function(t){Ut.post(t).then(function(t){te.dispatch("ADD_TODO",t,{text:"Task successfully added",status:"done"})}).catch(function(t){return t.then(function(t){te.dispatch("ERROR","",{text:t.error,status:"error"})})})}},{key:"deleteTask",value:function(t){Ut.delete(t).then(function(){return te.dispatch("DELETE_TODO",t,{text:"Task successfully deleted",status:"done"})}).catch(function(){te.dispatch("ERROR","",{text:"Server not response, wait please",status:"error"})})}},{key:"changeTaskCompletedStatus",value:function(t){Ut.put(ne({},t,{completed:!t.completed})).then(function(t){var e;e=t.completed?{text:"Task not completed",status:"done"}:{text:"Task completed",status:"done"},te.dispatch("CHANGE_TODO",t,e)}).catch(function(){te.dispatch("ERROR","",{text:"Server not response, wait please",status:"error"})})}},{key:"changeTaskEditingMode",value:function(t){t.editing?te.dispatch("CHANGE_TODO",t,{text:"Start editing",status:"warn"}):te.dispatch("CHANGE_TODO",t,{text:"End editing",status:"done"})}},{key:"filterTask",value:function(t){te.dispatch("FILTER",t,{text:"Task list filtered out",status:"done"})}},{key:"signIn",value:function(t){var n=this;Ut.signIn(t).then(function(t){localStorage.setItem("token",t.token),Ut.token=t.token;var e=Nt.changeRoute("todo");n.changeRoute(e,{text:"Logged in",status:"done"})}).catch(function(t){return t.then(function(t){te.dispatch("ERROR","",{text:t.error,status:"error"})})})}},{key:"signOut",value:function(){localStorage.removeItem("token");var t=Nt.changeRoute("login");this.changeRoute(t,{text:"Logged out",status:"done"})}},{key:"signUp",value:function(t){var n=this;Ut.signUp(t).then(function(t){localStorage.setItem("token",t.token),Ut.token=t.token;var e=Nt.changeRoute("todo");n.changeRoute(e,{text:"Successfully registered",status:"done"})}).catch(function(t){return t.then(function(t){te.dispatch("ERROR","",{text:t.error,status:"error"})})})}},{key:"initApplication",value:function(){var t=this,e=Nt.changeRoute("login");Ut.checkAuthorization().then(function(){e=Nt.changeRoute("todo"),t.changeRoute(e,{text:"Logged in",status:"done"})}).catch(function(){t.changeRoute(e,{text:"Login, Please",status:"warn"})})}},{key:"changeRoute",value:function(t,e){te.dispatch("CHANGE_ROUTE",{route:t},e)}}])&&re(e.prototype,n),o&&re(e,o),t}()),ae=document.createElement("template");function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ue(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}ae.innerHTML='\n<style>\n    .wrapper{\n        width: 600px;\n        height: 40px;\n        text-align: center;\n        vertical-align: middle;\n        font-size: 20px;\n        box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n        border-radius: 10px;\n    }\n    \n    .done{\n        border: 3px #0A885F groove;\n        background-color: #81FFD6;\n    }\n  \n    .warn {\n        border: 3px #DBC0A0 groove;\n        background-color: #FFE4C4;\n    }  \n    \n     .error {\n        border: 3px #C44F38 groove;\n        background-color:#FFC0A9;\n    }  \n  \n</style>\n<div class="wrapper">\n    <span class="tooltip"></span>\n</div>    \n';var fe=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=ue(this,le(n).call(this,t))).duration=3e3,e.timerId=null,e}var t,e,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(n,d),t=n,(e=[{key:"onInit",value:function(){this.template=ae,this.anchor.appendChild(this),this.tooltip=this.shadowRoot.querySelector(".tooltip"),this.tooltipWrapper=this.shadowRoot.querySelector(".wrapper"),this.tooltipWrapper.style.display="none"}},{key:"render",value:function(){var t=this;this.state.status&&(this.tooltip.textContent=this.state.text,this.tooltipWrapper.classList.remove(this.currentStyleClass),this.tooltipWrapper.classList.add(this.state.status),this.currentStyleClass=this.state.status,this.tooltipWrapper.style.display="table-cell",clearTimeout(this.timerId),this.timerId=setTimeout(function(){t.tooltipWrapper.style.display="none"},this.duration))}}])&&ce(t.prototype,e),o&&ce(t,o),n}();function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach(function(t){ye(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function me(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ge(t,e){return!e||"object"!==he(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function we(t,e){return(we=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}customElements.define("my-component-tooltip",fe);var Oe=function(){function n(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=ge(this,ve(n).call(this,t))).render(),e.addListeners(),e}var t,e,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&we(t,e)}(n,d),t=n,(e=[{key:"onInit",value:function(){this.template=r}},{key:"addListeners",value:function(){var e=this;Zt.subscribe("stateChanged",function(t){e.showTooltip(t.message),e.state=t,e.currentComponent instanceof e.state.route.component?e.applyChanges():e.renderComponent()}),ie.dispatch("initApplication")}},{key:"render",value:function(){this.anchor.appendChild(this),this.tooltipWrapper=this.shadowRoot.querySelector(".tooltip-wrapper"),this.tooltip=new fe({anchor:this.tooltipWrapper}),this.currentComponent=this.shadowRoot.querySelector(".app-wrapper"),this.mainWrapper=this.shadowRoot.querySelector(".main")}},{key:"renderComponent",value:function(){this.currentComponent.remove(),this.currentComponent=new this.state.route.component(be({},this.props,{anchor:this.mainWrapper}))}},{key:"showTooltip",value:function(t){this.tooltip.state=t}},{key:"applyChanges",value:function(){this.currentComponent.state=be({},this.state)}},{key:"state",set:function(t){this._state=be({},t),this.props.state=this._state},get:function(){return this._state}}])&&me(t.prototype,e),o&&me(t,o),n}();customElements.define("my-component-main",Oe);new Oe({anchor:document.body})}]);
//# sourceMappingURL=main.js.map