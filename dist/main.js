!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=19)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){t.exports=n(15)},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){var r=n(11),o=n(12);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){var r=n(8);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){var r=n(16),o=n(17),a=n(18);t.exports=function(t){return r(t)||o(t)||a()}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){var r=n(3),o=n(8),a=n(13),i=n(14);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(t){if(null===t||!a(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return i(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},s(e)}t.exports=s},function(t,e,n){},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(8);function o(e,n,a){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?t.exports=o=function(t,e,n){var o=[null];o.push.apply(o,e);var a=new(Function.bind.apply(t,o));return n&&r(a,n.prototype),a}:t.exports=o=Reflect.construct,o.apply(null,arguments)}t.exports=o},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(t,e,n,r){var o=e&&e.prototype instanceof y?e:y,a=Object.create(o.prototype),i=new S(r||[]);return a._invoke=function(t,e,n){var r=l;return function(o,a){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===o)throw a;return D()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=E(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?d:p,c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=d,n.method="throw",n.arg=c.arg)}}}(t,n,i),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l="suspendedStart",p="suspendedYield",h="executing",d="completed",f={};function y(){}function b(){}function v(){}var g={};g[a]=function(){return this};var m=Object.getPrototypeOf,w=m&&m(m(T([])));w&&w!==n&&r.call(w,a)&&(g=w);var x=v.prototype=y.prototype=Object.create(g);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function O(t){var e;this._invoke=function(n,o){function a(){return new Promise(function(e,a){!function e(n,o,a,i){var s=u(t[n],t,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,i)},function(t){e("throw",t,a,i)}):Promise.resolve(l).then(function(t){c.value=t,a(c)},function(t){return e("throw",t,a,i)})}i(s.arg)}(n,o,e,a)})}return e=e?e.then(a,a):a()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return f;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=u(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(t){if(t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:D}}function D(){return{value:e,done:!0}}return b.prototype=x.constructor=v,v.constructor=b,v[s]=b.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},k(O.prototype),O.prototype[i]=function(){return this},t.AsyncIterator=O,t.async=function(e,n,r,o){var a=new O(c(e,n,r,o));return t.isGeneratorFunction(n)?a:a.next().then(function(t){return t.done?t.value:a.next()})},k(x),x[s]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=T,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";n.r(e);n(10);var r=n(4),o=n.n(r),a=n(0),i=n.n(a),s=n(1),c=n.n(s),u=n(5),l=n.n(u),p=n(3),h=n.n(p),d=n(6),f=n.n(d),y=document.createElement("template");y.innerHTML='\n<style>\n.main  {\n    width: 600px;\n    height: 600px;\n    margin: 50px auto 0 auto;\n    padding: 0;\n    position: relative;\n }\n \n .tooltip-wrapper{\n    width: 100%;\n    height: 40px;\n }\n</style>\n\n\t<div class=main>\n\t\t<div class="tooltip-wrapper">\n\t\t</div>\n\t\t<div class="app-wrapper">\n\t\t</div>\n\t</div>\n';var b=n(9);function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var m=function(t){function e(t){var n;return i()(this,e),(n=l()(this,h()(e).call(this))).attachShadow({mode:"open"}),n.anchor=t.anchor,n.props=t,n.onInit(),n}return f()(e,t),c()(e,[{key:"onInit",value:function(){}},{key:"state",set:function(t){this._state=g({},t),this.props.state=this._state,this.render()},get:function(){return this._state}},{key:"props",set:function(t){this._props=g({},this.props,{},t)},get:function(){return this._props}},{key:"template",set:function(t){this._template=t.content.cloneNode(!0),this.shadowRoot.appendChild(this._template)},get:function(){return this._template}}]),e}(n.n(b)()(HTMLElement)),w=document.createElement("template");w.innerHTML='\n\t<style>\n\tbutton{\n    transition-duration: 0.6s;\n    cursor: pointer;\n    border-radius: 5px;\n    outline: none;\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\n\n.delete-button, .cancel-button, .not-done-filter-button{\n    background-color: white;\n    color: black;\n    border: 2px solid red; \n     box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\n.delete-button:hover, .cancel-button:hover, .not-done-filter-button:hover {\n    background-color: red; \n    color: white;\n}\n\n.not-todo-button, .all-filter-button{\n    background-color: white;\n    color: black;\n    border: 2px solid blue;\n     box-shadow: 2px 2px 4px rgba(0,0,0,0.5); \n}\n\n.not-todo-button:hover, .all-filter-button:hover {\n    background-color: blue; \n    color: white;\n}\n\n\n\n.todo-button, .save-button, .add-button, .done-filter-button{\n    background-color: white;\n    color: black;\n    border: 2px solid green; \n     box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\n.todo-button:hover, .save-button:hover, .add-button:hover, .done-filter-button:hover {\n    background-color: green; \n    color: white;\n}\n\n.sign-out-button{\n    border: 3px #B99E7E groove;\n    border-radius: 4px;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n    background-color: white;\n}\n\n.submit-button{\n    font-size: 20px;\n    height: 40px;\n    box-sizing: border-box;\n    padding: 0 20px 0 20px;\n    display: block;\n    margin: 30px auto 10px auto; \n    border: 3px #B99E7E groove;\n    border-radius: 4px;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n    background-color: white;\n    color: #715636;\n}\n\n.submit-button:hover, .sign-out-button:hover {\n    background-color: #B99E7E; \n    color: white;\n}\n\t</style>\n\t<button type="submit">\n\t\n    </button>\n';var x=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=w,this.render(),this.setDataAttribute()}},{key:"setDataAttribute",value:function(){this.dataset.text=this.props.title}},{key:"render",value:function(){this.anchor.appendChild(this);var t=this.shadowRoot.querySelector("button");t.classList.add(this.props.classStyle),t.textContent=this.props.title}}]),e}(m);customElements.define("my-component-button",x);var k=document.createElement("template");k.innerHTML='\n<style>\n\tdiv {\n    height: 100%;\n}\n\n.left-column{\n    float: left;\n    width: 80%;\n\n}\n\n.right-column{\n    \n    float: right;\n    width: 20%;\n}\n\ntd {\n    text-align: center;\n    vertical-align: center;\n}\ntable{\n    width: 100%;\n    height: 75%;\n}\n\np {\n    width: 100%;\n    margin: 10px;\n    padding: 0;\n}\n\n:host{\n    position: relative;\n    overflow: auto;\n    margin-top: 14px;\n    display: block;\n    height: 70px;\n    border-radius: 10px;\n     \n    box-shadow:  -2px -2px 4px rgba(0,0,0,0.5);\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\n\n:host([data-completed = "true"]){\n    background: #81FFD6;\n    border: 3px #0A885F groove; \n}\n\n:host([data-completed = "true"]:hover){\n    background:#54D2A9;\n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\n:host([data-completed = "false"]){\n    border: 3px #C44F38 groove; \n    background: #FFC0A9;\n}\n\n:host([data-completed = "false"]:hover){\n    background:#EA755E;\n   \n  box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\nspan{\n    position: absolute;\n    right: 15px;\n    bottom: 2px;\n    font-size: 12px;\n    color: #4d4d4d;\n    text-shadow: 2px 2px 3px rgba(0,0,0,0.5);\n}\n</style>\t\n\n<div class="left-column">\n   \n    <p></p>\n</div>\n<div class="right-column">\n    <table>\n        <tr><td class="done-button-wrapper"></td></tr>\n        <tr><td class="delete-button-wrapper"></td></tr>\n        \n    </table>\n     <span></span>\n</div>\n';var O=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=k,this.render(),this.setDataAttribute()}},{key:"setDataAttribute",value:function(){this.dataset._id=this.props.task._id,this.dataset.completed=this.props.task.completed}},{key:"addListeners",value:function(){var t=this;this.addEventListener("mouseover",function(){t.renderButton(),t.addButtonListeners()}),this.addEventListener("mouseout",this.removeButton.bind(this)),this.addEventListener("click",function(e){return t.clickListener(e)})}},{key:"clickListener",value:function(t){"BUTTON"!==t.composedPath()[0].tagName&&It.dispatch("startEditTask",this.props.task)}},{key:"addButtonListeners",value:function(){var t=this;this.deleteButton.addEventListener("click",function(e){It.dispatch("deletedTask",t.props.task._id)}),this.doneButton.addEventListener("click",function(e){It.dispatch("doneTask",t.props.task)})}},{key:"removeButton",value:function(){this.deleteButtonWrapper.removeChild(this.deleteButton),this.doneButtonWrapper.removeChild(this.doneButton)}},{key:"render",value:function(){this.anchor.appendChild(this),this.shadowRoot.querySelector("p").textContent=this.props.task.text,this.shadowRoot.querySelector("span").textContent=this.props.task.createDate,this.addListeners()}},{key:"renderButton",value:function(){this.doneButtonWrapper=this.shadowRoot.querySelector(".done-button-wrapper"),this.deleteButtonWrapper=this.shadowRoot.querySelector(".delete-button-wrapper"),this.deleteButton=new x({title:"Delete",classStyle:"delete-button",anchor:this.deleteButtonWrapper}),this.props.task.completed?this.doneButton=new x({title:"Not todo",classStyle:"not-todo-button",anchor:this.doneButtonWrapper}):this.doneButton=new x({title:"Todo",classStyle:"todo-button",anchor:this.doneButtonWrapper})}}]),e}(m);customElements.define("my-component-task",O);var E=document.createElement("template");function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}E.innerHTML='\n    <style>\n .left-column{\n    float: left;\n    width: 80%;\n\n}\n\n.right-column{\n    height: 100%;\n    float: right;\n    width: 20%;\n}\n\ntd {\n    text-align: center;\n    vertical-align: center;\n}\ntable{\n    width: 100%;\n    height: 75%;\n}\n\n:host{\nposition: relative;\n    margin-top: 14px;\n    display: block;\n    height: 70px;\n    border-radius: 10px;\n    border: 3px #665646 groove;  \n    box-shadow:  -2px -2px 4px rgba(0,0,0,0.5);\n    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\n\n:host([data-completed = "false"]){\n    background: #EA755E;\n}\n\n:host(my-component-textarea[data-completed = "true"]){\n    background: #68E8BD;\n}\n\n\n.text-area{\n    box-sizing: border-box;\n    height: 100%;\n    width: 100%;\n    padding: 10px;\n    margin: 0;\n    border: none;\n    outline: none;\n    resize: none;\n    background: inherit;\n    font: inherit;\n}\n\nspan{\n    position: absolute;\n    right: 15px;\n    bottom: 2px;\n    font-size: 12px;\n    color: #4d4d4d;\n    text-shadow: 2px 2px 3px rgba(0,0,0,0.5);\n}\n    </style>\n    \n <div class="left-column">\n       <textarea class="text-area"></textarea>\n </div>\n <div class="right-column">\n       <table>\n         <tr><td class="save-button-wrapper"></td></tr>\n         <tr><td class="cancel-button-wrapper"></td></tr>\n       </table>\n       <span></span>\n       </div>    \n';var S=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=E,this.render(),this.setDataAttribute()}},{key:"setDataAttribute",value:function(){this.dataset._id=this.props.task._id,this.dataset.completed=this.props.task.completed}},{key:"render",value:function(){var t=this;this.anchor.appendChild(this),this.textarea=this.shadowRoot.querySelector("textarea"),this.textarea.value=this.props.task.text,this.shadowRoot.querySelector("span").textContent=this.props.task.createDate,setTimeout(function(){t.textarea.focus()},0),this.saveButtonWrapper=this.shadowRoot.querySelector(".save-button-wrapper"),this.cancelButtonWrapper=this.shadowRoot.querySelector(".cancel-button-wrapper"),this.renderButton(),this.addButtonListeners(),this.addListeners()}},{key:"renderButton",value:function(){this.saveButton=new x({title:"Save",classStyle:"save-button",anchor:this.saveButtonWrapper}),this.cancelButton=new x({title:"Cancel",classStyle:"cancel-button",anchor:this.cancelButtonWrapper})}},{key:"addListeners",value:function(){var t=this;this.addEventListener("mouseleave",function(e){It.dispatch("endEditTask",t.props.task)}),this.textarea.addEventListener("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),It.dispatch("endEditTask",P({},t.props.task,{text:t.textarea.value})))})}},{key:"addButtonListeners",value:function(){var t=this;this.saveButton.addEventListener("click",function(e){It.dispatch("endEditTask",P({},t.props.task,{text:t.textarea.value}))}),this.cancelButton.addEventListener("click",function(e){It.dispatch("endEditTask",t.props.task)})}}]),e}(m);customElements.define("my-component-textarea",S);var T=document.createElement("template");function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}T.innerHTML="\n <style>\n    ul{\n    list-style-type: none;\n    margin: 0;\n    padding: 0;\n}\n\n\n</style>\n    <div>\n    <ul></ul>\n</div>\n\n";var R=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=T,this.render()}},{key:"render",value:function(){this.anchor.appendChild(this),this.ul=this.shadowRoot.querySelector("ul"),this.renderList()}},{key:"renderList",value:function(){var t=this;this.ul.innerHTML="",this.props.state.todoView.forEach(function(e){t.addTask(e)})}},{key:"addTask",value:function(t){var e=document.createElement("li");if(t.editing)new S(L({},this.props,{anchor:e,task:t}));else new O(L({},this.props,{anchor:e,task:t}));this.ul.appendChild(e)}}]),e}(m);customElements.define("my-component-task-list",R);var B=document.createElement("template");B.innerHTML='\n<style>\n    \n    .wrapper{\n     height: 80px;\n     margin: 10px 0 10px 0;\n     \n    }\n    \n    .left-column{\n        width: 80%;\n        float: left;\n    }\n\n    .right-column{\n        /*float: right;*/\n        margin: 320px;\n        display: table-cell;\n        vertical-align: middle;\n        text-align: center;\n        height: 80px;\n        width: 20%;\n    }\n    \n    textarea{\n    box-sizing: border-box;\n    height: 80px;\n    width: 100%;\n    padding: 10px;\n    margin: 0;\n    outline: none;\n    resize: none;\n    font: inherit;\n    border-radius: 10px;\n    border: 3px #B99E7E groove;  \n    box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n    background: #FFE4C4;\n    \n}\n\ntextarea:hover {\n    background: #F2D7B7;\n    border: 3px #665646 groove;  \n}\n/*\n.left-column:hover{\nbackground: #F2D7B7;\n}*/\n    \n</style>\n    \n    <div class="wrapper">\n        <div class="left-column">\n            <textarea ></textarea>\n        </div>\n        <div class="right-column"></div>\n    </div>\n\n';var C=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=B,this.render(),this.addListeners()}},{key:"addListeners",value:function(){var t=this;this.button.addEventListener("click",function(e){t.addTask()}),this.textarea.addEventListener("keydown",function(e){"Enter"===e.key&&t.addTask()})}},{key:"addTask",value:function(){It.dispatch("addTask",this.textarea.value),this.textarea.value=""}},{key:"render",value:function(){this.anchor.appendChild(this),this.textarea=this.shadowRoot.querySelector("textarea");var t=this.shadowRoot.querySelector(".right-column");this.button=new x({title:"Add task",anchor:t,classStyle:"add-button"})}}]),e}(m);customElements.define("my-component-input",C);var I=document.createElement("template");function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}I.innerHTML='\n    <style>\n   \n    .wrapper {\n   \n        width: 100% ;\n    }\n    table {\n    \n      margin: 10px;\n        /*width: 100%;*/\n        \n        height: 100%;\n    }\n    td {\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n        padding: 8px;\n    }\n    \n    [data-select="selected"] {\n        border-radius: 10px;\n        border: 3px #B99E7E groove;  \n        box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n        background: #FFE4C4;\n    }\n</style>\n    <div class="wrapper">\n        \n        <table>\n            <tr>\n                <td>Filter tasks</td>\n                <td class="all-wrapper"></td>\n                <td class="done-wrapper"></td>\n                <td class="not-done-wrapper"></td>\n            </tr>    \n        </table>    \n    </div>    \n';var A=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=I,this.render(),this.applyChanges()}},{key:"render",value:function(){this.anchor.appendChild(this),this.allButtonWrapper=this.shadowRoot.querySelector(".all-wrapper"),this.doneButtonWrapper=this.shadowRoot.querySelector(".done-wrapper"),this.notDoneButtonWrapper=this.shadowRoot.querySelector(".not-done-wrapper"),this.allTasks=new x({title:"All",classStyle:"all-filter-button",anchor:this.allButtonWrapper}),this.doneTasks=new x({title:"Done",classStyle:"done-filter-button",anchor:this.doneButtonWrapper}),this.notDoneTasks=new x({title:"Not Done",classStyle:"not-done-filter-button",anchor:this.notDoneButtonWrapper}),this.addButtonListeners()}},{key:"applyChanges",value:function(){switch([this.allButtonWrapper,this.doneButtonWrapper,this.notDoneButtonWrapper].forEach(function(t){t.dataset.select=""}),this.props.state.filterMethod){case"allTasks":this.allButtonWrapper.dataset.select="selected";break;case"doneTasks":this.doneButtonWrapper.dataset.select="selected";break;case"notDoneTasks":this.notDoneButtonWrapper.dataset.select="selected"}}},{key:"addButtonListeners",value:function(){var t=this;this.allTasks.addEventListener("click",function(e){It.dispatch("allFilter",t.props)}),this.doneTasks.addEventListener("click",function(e){It.dispatch("doneFilter",t.props)}),this.notDoneTasks.addEventListener("click",function(e){It.dispatch("notDoneFilter",t.props)})}},{key:"state",set:function(t){this.props.state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t),this.applyChanges()}}]),e}(m);customElements.define("my-component-filter",A);var F=document.createElement("template");function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}F.innerHTML='\n<style>\n    td {\n        padding: 10px;\n        text-align: center;\n        vertical-align: middle;\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n    }\n    div {\n        font-size: 20px;\n    }\n    \n    .all-tasks {\n        color: blue;\n        font-size: 40px;\n        text-shadow: 3px 3px 4px rgba(0,0,0,0.5);\n    }\n    .completed-tasks{\n        color: green;\n        font-size: 40px;\n        text-shadow: 3px 3px 4px rgba(0,0,0,0.5);\n    }\n    .not-completed-tasks {\n        color: red;\n        font-size: 40px;\n        text-shadow: 3px 3px 4px rgba(0,0,0,0.5);\n    }\n    \n</style>\n<div>\n    <table>\n    \t<tr>\n    \t\t<td>All tasks</td>\n    \t\t<td class="all-tasks"></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td>Completed tasks</td>\n    \t\t<td class="completed-tasks"></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td>Not completed tasks</td>\n    \t\t<td class="not-completed-tasks"></td>\n    \t</tr>\n        \n\t</table>\n</div>    \n';var q=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=F,this.render(),this.applyChanges()}},{key:"render",value:function(){this.anchor.appendChild(this),this.allTasks=this.shadowRoot.querySelector(".all-tasks"),this.completedTasks=this.shadowRoot.querySelector(".completed-tasks"),this.notCompletedTasks=this.shadowRoot.querySelector(".not-completed-tasks")}},{key:"applyChanges",value:function(){this.allTasks.textContent=this.props.state.countTasks.all,this.completedTasks.textContent=this.props.state.countTasks.completed,this.notCompletedTasks.textContent=this.props.state.countTasks.notCompleted}},{key:"state",set:function(t){this.props.state=W({},t),this._state=W({},t),this.applyChanges()},get:function(){return this._state}}]),e}(m);customElements.define("my-component-counter",q);var N=document.createElement("template");function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}N.innerHTML='\n\n<style>\n    ul{\n    list-style-type: none;\n    }\n    .left-column{\n    margin-left: 0;\n        float: left;\n        width: 70%;\n    }\n    .right-column{\n        width: 30%;\n        float: right;\n    }\n    h1{\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n        \n    }\n    .header {\n        position: relative;\n    }\n    .sign-out-wrapper {\n        position: absolute;\n        right: 10px;\n        top: 10px;\n    }\n    \n</style>\n    <div class="header">\n        <h1>Todo Application</h1>\n        <div class="sign-out-wrapper"></div>\n    </div>\n    <div class="left-column">\n        <div class="input-wrapper"></div>\n        <div class="filter-wrapper"></div>\n        <div class="todo-list-wrapper"></div>\n    </div>\n    <div class="right-column"></div>\n';var U=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=N,It.dispatch("initTodoComponent")}},{key:"render",value:function(){if(this.isRendered)this.applyChanges(this.props.state);else{this.isRendered=!0,this.anchor.appendChild(this);var t=this.shadowRoot.querySelector(".right-column"),e=this.shadowRoot.querySelector(".todo-list-wrapper"),n=this.shadowRoot.querySelector(".input-wrapper"),r=this.shadowRoot.querySelector(".filter-wrapper"),o=this.shadowRoot.querySelector(".sign-out-wrapper");new C(z({},this.props,{anchor:n}));this.taskList=new R(z({},this.props,{anchor:e})),this.filter=new A(z({},this.props,{anchor:r})),this.counter=new q(z({},this.props,{anchor:t})),this.signOutButton=new x({title:"Sign Out",classStyle:"sign-out-button",anchor:o})}}},{key:"applyChanges",value:function(t){this.taskList.state=z({},t),this.filter.state=z({},t),this.counter.state=z({},t)}},{key:"addListeners",value:function(){this.signOutButton.addEventListener("click",function(){It.dispatch("signOut")})}},{key:"state",set:function(t){this._state=z({},t),this.props.state=this._state,this.render(),this.addListeners()}}]),e}(m);customElements.define("my-component-todo",U);var G=document.createElement("template");function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}G.innerHTML='\n\t<style>\n\t\t.form-wrapper{\n\t\t\t\theight: 600px;\n\t\t\t\twidth: 600px;\n\t\t\t\tmargin: 10px auto 10px auto;\n\t\t\t\tdisplay: table-cell;\n\t\t\t\tvertical-align: middle;\n\t\t\t\ttext-align: center;\n\t\t\t}\n\nh1{\n\tfont-size: 40px;\n\ttext-align: center;\n\tmargin:20px;\n\tcolor: #715636;\n\ttext-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n}\n\ninput:hover{\n\tbackground: #E7CCAC;\n}\ninput:focus{\n\toutline: 3px #B99E7E groove;\n\tborder: 3px #B99E7E groove;\n}\n\ninput:-webkit-autofill{\n\tbackground: #E7CCAC\n}\n\n\nlabel, input {\n\tcolor: #715636;\n\ttext-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n\t\t\t\tfont-size: 20px;\n\n\t\t\t\tmargin: 10px 0 10px 0 ;\n\t\t\t\tdisplay: block;\n\t\t\t} \nlabel{\n\tcolor: #715636;\n\ttext-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n}\t\t\t\n\ninput {\n\twidth:300px;\n\theight: 30px;\n\tborder: 3px #B99E7E groove;\n\tborder-radius: 4px;\n\tbox-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n\t\n}\n\nform{\n    width: 400px; \n\t/*height: 400px;*/\n\tbackground: #FFE4C4;\n\tdisplay: block;\n\tbox-sizing: border-box;\n\t\n\tmargin: 10px auto 10px auto; \n\tpadding: 50px; \n\ttext-align: left;\n\tborder-radius: 10px;\n\tborder: 5px #B99E7E groove;\n\tbox-shadow: 5px 5px 10px rgba(0,0,0,0.5);\n\n\n\t/* border-style: groove ridge ridge groove; */\n\t/* display: table-cell;\n\tvertical-align: middle; */\n}\n\n.hide{\n    display: none;\n}\n\ntable{\n    width: 100%;\n}\n\ntd{\n    vertical-align: middle;\n}\n\n\n\t</style>\n\t<div class="form-wrapper">\n\t\t<form name="login">\n\t\t\t<h1>Login Form</h1>\n\t\t\t<label for="username" class="hide username">User Name</label>\n\t\t\t<input type="text"  class="hide" name="username"  placeholder="Enter User Name">\n\t\t\t<label for="email">Email</label>\n\t\t\t<input type="email" name="email" autocomplete="on" placeholder="Enter Email">\n\t\t\t<label for="password">Password</label>\n\t\t\t<input type="password" name="password" autocomplete="on" placeholder="Enter Password">\n\t\t\t\n\t\t\t\n\t\t\t<table>\n\t\t\t    <tr>\n\t\t\t        <td class="in-button"></td>\n\t\t\t        <td class="up-button"></td>\n                </tr>\n            </table>\n\t\t</form>\n\t</div>\n';var K=function(t){function e(t){return i()(this,e),l()(this,h()(e).call(this,t))}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=G,this.render()}},{key:"render",value:function(){this.anchor.appendChild(this),this.emailInput=this.shadowRoot.querySelector('input[name="email"]'),this.passwordInput=this.shadowRoot.querySelector('input[name="password"]'),this.formElement=this.shadowRoot.querySelector('[name="login"]');var t=this.shadowRoot.querySelector(".in-button"),e=this.shadowRoot.querySelector(".up-button");this.submitButton=new x({title:"Sign In",classStyle:"submit-button",anchor:t}),this.registerButton=new x({title:"Sign Up",classStyle:"submit-button",anchor:e}),this.addButtonListeners()}},{key:"addButtonListeners",value:function(){var t=this;this.submitButton.addEventListener("click",function(){It.dispatch("signIn",{email:t.emailInput.value,password:t.passwordInput.value})}),this.registerButton.addEventListener("click",function(){t.registerMode?It.dispatch("signUp",{email:t.emailInput.value,password:t.passwordInput.value,username:t.userNameInput.value}):(t.userNameInput=t.shadowRoot.querySelector('input[name="username"]'),t.userNameInput.classList.toggle("hide"),t.shadowRoot.querySelector(".username").classList.toggle("hide"),t.registerMode=!0)})}},{key:"state",set:function(t){this._state=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t),this.props.state=this._state}}]),e}(m);customElements.define("my-component-login",K);var Y={login:{url:"/login",component:K,route:"login"},todo:{url:"/todo-app",component:U,route:"todo"}},$=new(function(){function t(){i()(this,t),this.routerConfig=Y,this.addListeners()}return c()(t,[{key:"addListeners",value:function(){window.onpopstate=function(t){It.dispatch("changeRoute",t.state)}}},{key:"changeRoute",value:function(t){return this.currentRoute=this.routerConfig[t],window.history.pushState(this.currentRoute.route,"",this.currentRoute.url),this.currentRoute}}]),t}()),J=n(2),Q=n.n(J);const X=(t,e)=>e.some(e=>t instanceof e);let Z,tt;const et=new WeakMap,nt=new WeakMap,rt=new WeakMap,ot=new WeakMap,at=new WeakMap;let it={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return nt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||rt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ut(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function st(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tt||(tt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(lt(this),e),ut(et.get(this))}:function(...e){return ut(t.apply(lt(this),e))}:function(e,...n){const r=t.call(lt(this),e,...n);return rt.set(r,e.sort?e.sort():[e]),ut(r)}}function ct(t){return"function"==typeof t?st(t):(t instanceof IDBTransaction&&function(t){if(nt.has(t))return;const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{e(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});nt.set(t,e)}(t),X(t,Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(t,it):t)}function ut(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{e(ut(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(e=>{e instanceof IDBCursor&&et.set(e,t)}).catch(()=>{}),at.set(e,t),e}(t);if(ot.has(t))return ot.get(t);const e=ct(t);return e!==t&&(ot.set(t,e),at.set(e,t)),e}const lt=t=>at.get(t);function pt(t,e,{blocked:n,upgrade:r,blocking:o,terminated:a}={}){const i=indexedDB.open(t,e),s=ut(i);return r&&i.addEventListener("upgradeneeded",t=>{r(ut(i.result),t.oldVersion,t.newVersion,ut(i.transaction))}),n&&i.addEventListener("blocked",()=>n()),a&&i.addEventListener("close",()=>a()),o&&s.then(t=>t.addEventListener("versionchange",o)).catch(()=>{}),s}const ht=["get","getKey","getAll","getAllKeys","count"],dt=["put","add","delete","clear"],ft=new Map;function yt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(ft.get(e))return ft.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!ht.includes(n))return;const a=async function(t,...e){const a=this.transaction(t,o?"readwrite":"readonly");let i=a.store;r&&(i=i.index(e.shift()));const s=i[n](...e);return o&&await a.done,s};return ft.set(e,a),a}!function(t){it=t(it)}(t=>({...t,get:(e,n,r)=>yt(e,n)||t.get(e,n,r),has:(e,n)=>!!yt(e,n)||t.has(e,n)}));var bt=function(){var t;return Q.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.a.awrap(pt("DB",1,{upgrade:function(t){t.createObjectStore("loginStore",{keyPath:"username"}).createIndex("email","email",{unique:!0}),t.createObjectStore("tasksStore",{keyPath:"_id",autoIncrement:!0}).createIndex("_creator","_creator")}}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}})}();function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var mt=new(function(){function t(){i()(this,t)}return c()(t,[{key:"checkAuthorization",value:function(t){return!!localStorage.getItem("currentToken")&&localStorage.getItem("currentToken")===t}},{key:"signIn",value:function(t){var e,n;return Q.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Q.a.awrap(bt);case 3:return e=r.sent,r.next=6,Q.a.awrap(e.getFromIndex("loginStore","email",t.email));case 6:if(n=r.sent){r.next=9;break}throw new Error("This email doesn't exist");case 9:if(n.password===t.password){r.next=11;break}throw new Error("Password error");case 11:return localStorage.setItem("currentToken",n.token),r.abrupt("return",{token:n.token});case 15:if(r.prev=15,r.t0=r.catch(0),"NotFoundError"!==r.t0.name){r.next=19;break}throw new Error("DataBase error, try again");case 19:throw new Error(r.t0.message);case 20:case"end":return r.stop()}},null,null,[[0,15]])}},{key:"generateToken",value:function(){for(var t=[],e=0;e<20;e++)t.push(Math.floor(10*Math.random()));return t.join("")}},{key:"checkData",value:function(t){return!t.username||t.username.length<5?"Enter username longer than 5 characters":t.email&&t.email.includes("@")?!t.password||t.password.length<6?"Enter password longer than 6 characters":void 0:"Enter correct email"}},{key:"addUser",value:function(t){var e,n,r;return Q.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e=this.checkData(t))){o.next=3;break}throw new Error(e);case 3:return o.prev=3,o.next=6,Q.a.awrap(bt);case 6:return n=o.sent,r=this.generateToken(),o.next=10,Q.a.awrap(n.add("loginStore",gt({},t,{token:r})));case 10:return o.sent,localStorage.setItem("currentToken",r),o.abrupt("return",{token:r});case 15:throw o.prev=15,o.t0=o.catch(3),e="DataBase error, try again","AbortError"===o.t0.message&&(e="User with this username or email already exist"),new Error(e);case 20:case"end":return o.stop()}},null,this,[[3,15]])}}]),t}());function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var kt=new(function(){function t(){i()(this,t)}return c()(t,[{key:"put",value:function(t){var e;return Q.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Q.a.awrap(bt);case 3:return e=n.sent,n.next=6,Q.a.awrap(e.put("tasksStore",t));case 6:return n.sent,n.abrupt("return",xt({},t));case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",Promise.reject(Promise.resolve({error:"DataBase error, try again"})));case 13:case"end":return n.stop()}},null,null,[[0,10]])}},{key:"get",value:function(t){var e,n;return Q.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Q.a.awrap(bt);case 3:return e=r.sent,r.next=6,Q.a.awrap(e.getAllFromIndex("tasksStore","_creator",t));case 6:return n=r.sent,r.abrupt("return",n.reverse());case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",Promise.reject(Promise.resolve({error:"DataBase error, try again"})));case 13:case"end":return r.stop()}},null,null,[[0,10]])}},{key:"delete",value:function(t){var e,n;return Q.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Q.a.awrap(bt);case 3:return e=r.sent,r.next=6,Q.a.awrap(e.delete("tasksStore",t,"_id"));case 6:return n=r.sent,r.abrupt("return",n);case 10:return r.prev=10,r.t0=r.catch(0),r.abrupt("return",Promise.reject(Promise.resolve({error:"DataBase error, try again"})));case 13:case"end":return r.stop()}},null,null,[[0,10]])}},{key:"getDate",value:function(){var t=new Date;return"".concat(("0"+t.getDate()).slice(-2),".").concat(("0"+(t.getMonth()+1)).slice(-2),".").concat(t.getFullYear())}},{key:"post",value:function(t){var e,n,r;return Q.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Q.a.awrap(bt);case 3:return e=o.sent,n={text:t.text,completed:!1,createDate:this.getDate(),_creator:localStorage.getItem("currentToken")},o.next=7,Q.a.awrap(e.add("tasksStore",n));case 7:return r=o.sent,o.abrupt("return",xt({},n,{_id:r}));case 11:return o.prev=11,o.t0=o.catch(0),o.abrupt("return",Promise.reject(Promise.resolve({error:"DataBase error, try again"})));case 14:case"end":return o.stop()}},null,this,[[0,11]])}}]),t}()),Ot=new(function(){function t(){i()(this,t),this.token=localStorage.getItem("token")}return c()(t,[{key:"checkAuthorization",value:function(){var t=this;return new Promise(function(e,n){mt.checkAuthorization(t.token)?e(t.token):n("error")})}},{key:"post",value:function(t){return Q.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.text.length<5)){e.next=2;break}return e.abrupt("return",Promise.reject(Promise.resolve({error:"Enter more than 5 characters"})));case 2:return e.abrupt("return",kt.post(t));case 3:case"end":return e.stop()}})}},{key:"get",value:function(){return kt.get(this.token)}},{key:"delete",value:function(t){return Q.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kt.delete(t));case 1:case"end":return e.stop()}})}},{key:"put",value:function(t){return Q.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kt.put(t));case 1:case"end":return e.stop()}})}},{key:"signIn",value:function(t){return Q.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.a.awrap(mt.signIn(t));case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),Promise.resolve({error:e.t0});case 9:case"end":return e.stop()}},null,null,[[0,6]])}},{key:"signUp",value:function(t){var e;return Q.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Q.a.awrap(mt.addUser(t));case 3:return e=n.sent,n.abrupt("return",e);case 7:throw n.prev=7,n.t0=n.catch(0),Promise.resolve({error:n.t0});case 10:case"end":return n.stop()}},null,null,[[0,7]])}}]),t}()),Et=n(7),jt=n.n(Et);function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Tt(t,e){switch(e){case"allTasks":return jt()(t);case"doneTasks":return jt()(t.filter(function(t){return t.completed}));case"notDoneTasks":return jt()(t.filter(function(t){return!t.completed}))}}function Dt(t){var e=t||[],n=e.length,r=0,o=0;return e.forEach(function(t){t.completed?r++:o++}),{all:n,completed:r,notCompleted:o}}var Lt=new(function(){function t(){i()(this,t),this.channels={}}return c()(t,[{key:"subscribe",value:function(t,e){this.channels[t]||(this.channels[t]=[]),this.channels[t].push(e)}},{key:"unSubscribe",value:function(t,e){this.channels[t]&&(this.channels[t]=this.channels[t].filter(function(t){return t!==e}))}},{key:"publish",value:function(t,e){this.channels[t]&&this.channels[t].length&&this.channels[t].forEach(function(t){t(e)})}}]),t}()),Rt=new(function(){function t(){i()(this,t),this.reducers={CHANGE_ROUTE:function(t,e,n){return St({},e,{},t,{message:n})},INIT_TODO:function(t,e,n){return St({},e,{todoList:jt()(t),todoView:jt()(t),filterMethod:"allTasks",countTasks:Dt(jt()(t)),message:n})},ADD_TODO:function(t,e,n){var r=[t].concat(jt()(e.todoList));return St({},e,{todoList:r,todoView:Tt(r,e.filterMethod),countTasks:Dt(r),message:n})},DELETE_TODO:function(t,e,n){var r=jt()(e.todoList.filter(function(e){return e._id!==t}));return St({},e,{todoList:r,todoView:Tt(r,e.filterMethod),countTasks:Dt(r),message:n})},CHANGE_TODO:function(t,e,n){var r=jt()(e.todoList.map(function(e){return e._id===t._id?t:e}));return St({},e,{todoList:r,todoView:Tt(r,e.filterMethod),countTasks:Dt(r),message:n})},FILTER:function(t,e,n){return St({},e,{filterMethod:t,todoView:Tt(e.todoList,t),message:n})},ERROR:function(t,e,n){return St({},e,{countTasks:Dt(e.taskList),message:n})}},this.state={todoList:[],todoView:[]}}return c()(t,[{key:"dispatch",value:function(t,e,n){this.reducers[t]&&(this.state=this.reducers[t](e,this.state,n)),Lt.publish("stateChanged",this.state)}}]),t}());function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var It=new(function(){function t(){i()(this,t),this.initHandlers()}return c()(t,[{key:"initHandlers",value:function(){var t=this;this.handlers={addTask:function(e){return t.addTask({text:e,completed:!1})},initApplication:function(){return t.initApplication()},initTodoComponent:function(){return t.getTaskList()},deletedTask:function(e){return t.deleteTask(e)},doneTask:function(e){return t.changeTaskCompletedStatus(e)},startEditTask:function(e){return t.changeTaskEditingMode(Ct({},e,{editing:!0}))},endEditTask:function(e){delete e.editing,t.changeTaskEditingMode(Ct({},e))},allFilter:function(){return t.filterTask("allTasks")},doneFilter:function(){return t.filterTask("doneTasks")},notDoneFilter:function(){return t.filterTask("notDoneTasks")},signIn:function(e){return t.signIn(e)},signOut:function(){return t.signOut()},signUp:function(e){return t.signUp(e)},changeRoute:function(e){var n=$.changeRoute(e);t.changeRoute(n,{})}}}},{key:"dispatch",value:function(t,e){this.handlers[t]&&this.handlers[t](e)}},{key:"getTaskList",value:function(){Ot.get().then(function(t){return Rt.dispatch("INIT_TODO",t,{})}).catch(function(){Rt.dispatch("ERROR",[],{text:"Server not response, try again",status:"error"})})}},{key:"addTask",value:function(t){Ot.post(t).then(function(t){Rt.dispatch("ADD_TODO",t,{text:"Task successfully added",status:"done"})}).catch(function(t){return t.then(function(t){Rt.dispatch("ERROR",[],{text:t.error,status:"error"})})})}},{key:"deleteTask",value:function(t){Ot.delete(t).then(function(){return Rt.dispatch("DELETE_TODO",t,{text:"Task successfully deleted",status:"done"})}).catch(function(){Rt.dispatch("ERROR","",{text:"Server not response, wait please",status:"error"})})}},{key:"changeTaskCompletedStatus",value:function(t){Ot.put(Ct({},t,{completed:!t.completed})).then(function(t){var e;e=t.completed?{text:"Task completed",status:"done"}:{text:"Task not completed",status:"done"},Rt.dispatch("CHANGE_TODO",t,e)}).catch(function(){Rt.dispatch("ERROR",[],{text:"Server not response, wait please",status:"error"})})}},{key:"changeTaskEditingMode",value:function(t){Ot.put(Ct({},t)).then(function(t){t.editing?Rt.dispatch("CHANGE_TODO",t,{text:"Start editing",status:"warn"}):Rt.dispatch("CHANGE_TODO",t,{text:"End editing",status:"done"})}).catch(function(){Rt.dispatch("ERROR",[],{text:"Server not response, wait please",status:"error"})})}},{key:"filterTask",value:function(t){Rt.dispatch("FILTER",t,{text:"Task list filtered out",status:"done"})}},{key:"signIn",value:function(t){var e=this;Ot.signIn(t).then(function(t){localStorage.setItem("token",t.token),Ot.token=t.token;var n=$.changeRoute("todo");e.changeRoute(n,{text:"Logged in",status:"done"})}).catch(function(t){return t.then(function(t){Rt.dispatch("ERROR",[],{text:t.error,status:"error"})})})}},{key:"signOut",value:function(){localStorage.removeItem("token");var t=$.changeRoute("login");this.changeRoute(t,{text:"Logged out",status:"done"})}},{key:"signUp",value:function(t){var e=this;Ot.signUp(t).then(function(t){localStorage.setItem("token",t.token),Ot.token=t.token;var n=$.changeRoute("todo");e.changeRoute(n,{text:"Successfully registered",status:"done"})}).catch(function(t){return t.then(function(t){Rt.dispatch("ERROR",[],{text:t.error,status:"error"})})})}},{key:"initApplication",value:function(){var t=this,e=$.changeRoute("login");Ot.checkAuthorization().then(function(){e=$.changeRoute("todo"),t.changeRoute(e,{text:"Logged in",status:"done"})}).catch(function(){t.changeRoute(e,{text:"Login, Please",status:"warn"})})}},{key:"changeRoute",value:function(t,e){Rt.dispatch("CHANGE_ROUTE",{route:t},e)}}]),t}()),_t=document.createElement("template");_t.innerHTML='\n<style>\n    .wrapper{\n        width: 600px;\n        height: 40px;\n        text-align: center;\n        vertical-align: middle;\n        font-size: 20px;\n        box-shadow: 2px 2px 4px rgba(0,0,0,0.5);\n        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);\n        border-radius: 10px;\n    }\n    \n    .done{\n        border: 3px #0A885F groove;\n        background-color: #81FFD6;\n    }\n  \n    .warn {\n        border: 3px #DBC0A0 groove;\n        background-color: #FFE4C4;\n    }  \n    \n     .error {\n        border: 3px #C44F38 groove;\n        background-color:#FFC0A9;\n    }  \n  \n</style>\n<div class="wrapper">\n    <span class="tooltip"></span>\n</div>    \n';var At=function(t){function e(t){var n;return i()(this,e),(n=l()(this,h()(e).call(this,t))).duration=3e3,n.timerId=null,n}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=_t,this.anchor.appendChild(this),this.tooltip=this.shadowRoot.querySelector(".tooltip"),this.tooltipWrapper=this.shadowRoot.querySelector(".wrapper"),this.tooltipWrapper.style.display="none"}},{key:"render",value:function(){var t=this;this.state.status&&(this.tooltip.textContent=this.state.text,this.tooltipWrapper.classList.remove(this.currentStyleClass),this.tooltipWrapper.classList.add(this.state.status),this.currentStyleClass=this.state.status,this.tooltipWrapper.style.display="table-cell",clearTimeout(this.timerId),this.timerId=setTimeout(function(){t.tooltipWrapper.style.display="none"},this.duration))}}]),e}(m);function Ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(n),!0).forEach(function(e){o()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}customElements.define("my-component-tooltip",At);var Wt=function(t){function e(t){var n;return i()(this,e),(n=l()(this,h()(e).call(this,t))).render(),n.addListeners(),n}return f()(e,t),c()(e,[{key:"onInit",value:function(){this.template=y}},{key:"addListeners",value:function(){var t=this;Lt.subscribe("stateChanged",function(e){t.showTooltip(e.message),t.state=e,t.currentComponent instanceof t.state.route.component?t.applyChanges():t.renderComponent()}),It.dispatch("initApplication")}},{key:"render",value:function(){this.anchor.appendChild(this),this.tooltipWrapper=this.shadowRoot.querySelector(".tooltip-wrapper"),this.tooltip=new At({anchor:this.tooltipWrapper}),this.currentComponent=this.shadowRoot.querySelector(".app-wrapper"),this.mainWrapper=this.shadowRoot.querySelector(".main")}},{key:"renderComponent",value:function(){this.currentComponent.remove(),this.currentComponent=new this.state.route.component(Mt({},this.props,{anchor:this.mainWrapper}))}},{key:"showTooltip",value:function(t){this.tooltip.state=t}},{key:"applyChanges",value:function(){this.currentComponent.state=Mt({},this.state)}},{key:"state",set:function(t){this._state=Mt({},t),this.props.state=this._state},get:function(){return this._state}}]),e}(m);customElements.define("my-component-main",Wt);new Wt({anchor:document.body})}]);
//# sourceMappingURL=main.js.map